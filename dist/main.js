(()=>{"use strict";function e(e){const t=document.createElement("h1");return t.className="showId",t.style.display="none",t.textContent=e.id||e.show.id,t}function t(e){const t=document.createElement("h1");return t.className="showTitle",t.textContent=e.name||e.show.name,t}function n(e){const t=document.createElement("h3");return t.className="year",t.textContent=`Ended: ${e.ended||e.show.ended||"N/A"}`,t}function o(e){const t=document.createElement("h3");t.className="genre";let n="Genres N/A";return e.genres?n=e.genres.join(", "):e.show&&e.show.genres&&(n=e.show.genres.join(", ")),t.textContent=n,t}function c(e){const t=document.createElement("h3");return t.className="language",t.textContent=`Language: ${e.language||e.show.language||"N/A"}`,t}function a(e){const t=document.createElement("h3");t.className="rating";let n="Rating: N/A";return e.rating?n=`Rating: ${e.rating.average}/10`:e.show.rating&&(n=`Rating: ${e.show.rating.average}/10`),t.textContent=n,t}function s(e){const t=document.createElement("div");t.className="show-summary";const n=document.createElement("h2");n.className="plot",n.textContent="Plot Summary";const o=document.createElement("div");return o.className="summary",o.innerHTML=e.summary||e.show.summary||"Summary N/A",t.appendChild(n),t.appendChild(o),t}const r=function(r,i){const d=function(){const e=document.createElement("div");return e.className="full-details",e}(),l=function(r){const i=document.createElement("div");i.className="image-card";const d=function(e){const t=document.createElement("img");let n="./img/placeholder.jpg";return e.image?n=e.image.medium:e.show.image&&(n=e.show.image.medium),t.src=n,t.alt="show poster",t}(r),l=function(r){const i=document.createElement("div");i.className="show-info";const d=[e(r),t(r),n(r),o(r),c(r),a(r),s(r)];for(let e=0;e<d.length;e+=1)i.appendChild(d[e]);return i}(r);return i.appendChild(d),i.appendChild(l),i}(i);d.appendChild(l),r.appendChild(d)},i=document.querySelector("#content");function d(e){const t=document.createElement("div");t.classList.add("search-result-poster");const n=document.createElement("img");let o="./img/placeholder.jpg";return e.image?o=e.image.medium:e.show&&e.show.image&&(o=e.show.image.medium),n.src=o,n.alt="Poster",n.id="poster",t.appendChild(n),t.addEventListener("click",(()=>{i.style.alignItems="normal",i.innerHTML="",r(i,e)})),t}const l=function(e,t){const n=document.createElement("div");n.classList.add("search-result");const o=d(t),c=document.createElement("h3");c.textContent=t.name||t.show.name||"Title N/A",c.classList.add("title"),c.id="title";const a=document.createElement("div");a.classList.add("search-result-name"),a.appendChild(c);const s=document.createElement("div");s.classList.add("reaction-action");const r=document.createElement("div");r.classList.add("reaction");const i=document.createElement("div");i.classList.add("likes");const l=document.createElement("img");l.src="./assets/like.png",l.alt="Like";const m=document.createElement("div");m.textContent="Like",i.appendChild(l),i.appendChild(m);const u=document.createElement("div");u.classList.add("counter"),u.textContent="",r.appendChild(i),r.appendChild(u);const h=document.createElement("div");h.classList.add("actions");const p=document.createElement("button");p.textContent="Comment",p.classList.add("comment");const g=document.createElement("button");g.textContent="Reservations",g.classList.add("reservation"),h.appendChild(p),h.appendChild(g),s.appendChild(r),s.appendChild(h),n.appendChild(o),n.appendChild(a),n.appendChild(s),e.appendChild(n),i.addEventListener("click",(()=>{!function(e,t){e.classList.contains("liked")?(e.classList.remove("liked"),t.innerHTML=""):(e.classList.add("liked"),t.innerHTML="Liked")}(i,u)}))},m=document.querySelector("#content");async function u(){try{const e=await fetch("https://api.tvmaze.com/shows"),t=await e.json(),n=Math.floor(200*Math.random());return t.slice(n,n+20).forEach((e=>{l(m,e)})),t}catch(e){return e}}document.querySelector("#home").addEventListener("click",(e=>{e.preventDefault(),m.innerHTML="",u()}));const h=u,p=document.getElementById("content"),g=document.querySelector("header"),v=document.querySelector("content"),E=document.querySelector("footer"),y=document.querySelector(".errorClose"),f=document.querySelector(".errorDialog");function L(e){document.querySelector(".errorMessage").innerText=e,document.querySelector(".errorDialog").style.display="block",g.style.pointerEvents="none",v.style.pointerEvents="none",E.style.pointerEvents="none",document.body.style.overflow="hidden"}y.addEventListener("click",(e=>{e.preventDefault(),f.style.display="none",g.style.pointerEvents="auto",v.style.pointerEvents="auto",E.style.pointerEvents="auto",document.body.style.overflow="auto",h()}));const w=document.querySelector(".hamburger"),C=document.querySelector(".nav-items"),k=document.querySelector("#content");function N(){w.classList.remove("active"),C.classList.remove("active")}document.querySelector(".search-button").addEventListener("click",(e=>{e.preventDefault(),k.innerHTML="",async function(){try{const e=document.getElementById("search").value,t="https://api.tvmaze.com/";if(""!==e){const n=await fetch(`${t}search/shows?q=${e}`),o=await async function(e){const t=await e.json();return e.ok&&0===t.length?(L("No item found."),"No item found."):e.ok?(t.forEach((e=>{l(p,e)})),t):(L(`Error in fetchedData: ${t.Error}`),t.Error)}(n);return o}L("No search input provided.")}catch(e){return L(`${e.message}, unable to complete request.`),e.message}}()}));const q=document.querySelector("#content"),S=document.querySelectorAll("#tvshows"),x=document.getElementsByClassName("nav-link");function b(e){for(let e=0;e<x.length;e+=1)x[e].classList.remove("active");e.target.classList.add("active")}window.addEventListener("load",(()=>{const e=document.querySelector("#loader");e.classList.add("loader-hidden"),e.addEventListener("transitionend",(()=>{document.body.removeChild("loader")}))})),h(),S.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),q.innerHTML="",async function(){try{const e=await fetch("https://api.tvmaze.com/shows"),t=await e.json();return t.forEach((e=>{l(q,e)})),t}catch(e){return e}}()}))})),function(){for(let e=0;e<x.length;e+=1)x[e].addEventListener("click",b)}();const M=document.querySelector(".hamburger"),T=document.querySelectorAll(".nav-link");M.addEventListener("click",(function(){w.classList.toggle("active"),C.classList.toggle("active")})),T.forEach((e=>e.addEventListener("click",N))),window.addEventListener("click",(function(e){e.target.closest(".hamburger")||e.target.closest(".nav-items")||N()}))})();