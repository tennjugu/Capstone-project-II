(()=>{"use strict";let e=[];class t{constructor(e,t,n,o){this.date=e,this.name=t,this.insight=n,this.movieId=o}}function n(){const e=document.createElement("label");return e.textContent="Date",e.htmlFor="comment-date",e}function o(){const e=document.createElement("input");e.id="comment-date",e.style.display="none";const t=new Date,n=t.getDate(),o=t.getMonth()+1,c=t.getFullYear(),r=`${n.toString().padStart(2,"0")}/${o.toString().padStart(2,"0")}/${c}`;return e.value=r,e}function c(){const e=document.createElement("label");return e.htmlFor="comment-username",e.className="comment-username",e.textContent="Name",e}function r(){const e=document.createElement("input");return e.type="text",e.id="comment-username",e.placeholder="Your name",e.required=!0,e}function a(){const e=document.createElement("label");return e.htmlFor="comment-insights",e.className="comment-insights",e.textContent="Insights",e}function s(){const e=document.createElement("textarea");return e.id="comment-insights",e.placeholder="Your insights",e.rows="6",e.required=!0,e}function l(){const e=document.createElement("button");return e.type="submit",e.className="submit-comment",e.textContent="Comment",e}function i(t){const n=document.querySelector(".comment-records");n.innerHTML="";const o=e.filter((e=>e.movieId===t));for(let e=0;e<o.length;e+=1){const t=o[e],c=document.createElement("p");c.className="new-record",c.textContent=`${t.date} ${t.name}: ${t.insight}`,n.appendChild(c)}}let d=[];class m{constructor(e,t,n,o){this.reserveName=e,this.startDate=t,this.endDate=n,this.movieId=o}}function u(){const e=document.createElement("label");return e.htmlFor="reservation-name",e.textContent="Name",e}function h(){const e=document.createElement("input");return e.type="text",e.id="reservation-name",e.placeholder="Your name",e.required=!0,e}function p(){const e=document.createElement("label");return e.htmlFor="start-date",e.textContent="Start Date",e}function v(){const e=document.createElement("input");return e.type="date",e.id="start-date",e.required=!0,e}function g(){const e=document.createElement("label");return e.htmlFor="end-date",e.textContent="End Date",e}function f(){const e=document.createElement("input");return e.type="date",e.id="end-date",e.required=!0,e}function y(){const e=document.createElement("button");return e.type="submit",e.className="reserve-button",e.textContent="Reserve",e}function E(e){document.querySelector(".reservation-records").innerHTML="";const t=d.filter((t=>t.movieId===e));for(let e=0;e<t.length;e+=1){const n=t[e],o=document.querySelector(".reservation-records");o.innerHTML="";const c=document.createElement("p");c.className="new-reserve-record",c.textContent=`${n.reserveName}: ${n.startDate} to ${n.endDate}`,o.appendChild(c)}}function C(e){const t=document.createElement("h1");return t.className="showId",t.style.display="none",t.textContent=e.id||e.show.id,t}function S(e){const t=document.createElement("h1");return t.className="showTitle",t.textContent=e.name||e.show.name,t}function L(e){const t=document.createElement("h3");return t.className="year",t.textContent=`Ended: ${e.ended||e.show.ended||"N/A"}`,t}function w(e){const t=document.createElement("h3");t.className="genre";let n="Genres N/A";return e.genres?n=e.genres.join(", "):e.show&&e.show.genres&&(n=e.show.genres.join(", ")),t.textContent=n,t}function q(e){const t=document.createElement("h3");return t.className="language",t.textContent=`Language: ${e.language||e.show.language||"N/A"}`,t}function N(e){const t=document.createElement("h3");t.className="rating";let n="Rating: N/A";return e.rating&&null!==e.rating.average?n=`Rating: ${e.rating.average}/10`:e.show.rating&&null!==e.show.rating.average&&(n=`Rating: ${e.show.rating.average}/10`),t.textContent=n,t}function x(e){const t=document.createElement("div");t.className="show-summary";const n=document.createElement("h2");n.className="plot",n.textContent="Plot Summary";const o=document.createElement("div");return o.className="summary",o.innerHTML=e.summary||e.show.summary||"N/A",t.appendChild(n),t.appendChild(o),t}const b=function(b,k){const I=function(){const e=document.createElement("div");return e.className="full-details",e}(),D=function(e){const t=document.createElement("div");t.className="image-card";const n=function(e){const t=document.createElement("img");let n="./img/placeholder.jpg";return e.image?n=e.image.medium:e.show.image&&(n=e.show.image.medium),t.src=n,t.alt="show poster",t}(e),o=function(e){const t=document.createElement("div");t.className="show-info";const n=[C(e),S(e),L(e),w(e),q(e),N(e),x(e)];for(let e=0;e<n.length;e+=1)t.appendChild(n[e]);return t}(e);return t.appendChild(n),t.appendChild(o),t}(k),T=function(){const e=document.createElement("div");e.className="comment-log-section",e.id="comment-log-section";const t=document.createElement("h2");t.className="comment-header",t.textContent="Comments";const n=document.createElement("div");return n.className="comment-records",e.appendChild(t),e.appendChild(n),e}(),$=function(){const e=document.createElement("form");e.action="",e.className="comment-form scrollcomment";const t=[n(),o(),c(),r(),a(),s(),l()];for(let n=0;n<t.length;n+=1)e.appendChild(t[n]);return e}(),M=function(){const e=document.createElement("div");e.className="reservation-log-section",e.id="reservation-log-section";const t=document.createElement("h2");t.className="reservation-header",t.textContent="Reservations";const n=document.createElement("div");return n.className="reservation-records",e.appendChild(t),e.appendChild(n),e}(),H=function(){const e=document.createElement("form");e.action="",e.className="reservation-form";const t=[u(),h(),p(),v(),g(),f(),y()];for(let n=0;n<t.length;n+=1)e.appendChild(t[n]);return e}();I.appendChild(D),I.appendChild(T),I.appendChild($),I.appendChild(M),I.appendChild(H),b.appendChild(I),function(){const t=JSON.parse(localStorage.getItem("commentStore"));e=t||[]}(),i(document.querySelector(".showId").textContent),function(){const e=JSON.parse(localStorage.getItem("reserveStore"));d=e||[]}(),E(document.querySelector(".showId").textContent),document.querySelector(".comment-form").addEventListener("submit",(n=>{const o=document.querySelector("#comment-username"),c=document.querySelector("#comment-insights");n.preventDefault(),function(){const n=document.querySelector("#comment-date").value,o=document.querySelector("#comment-username").value,c=document.querySelector("#comment-insights").value,r=document.querySelector(".showId").textContent,a=new t(n,o,c,r);e.push(a),i(r),localStorage.setItem("commentStore",JSON.stringify(e))}(),o.value="",c.value=""})),document.querySelector(".reservation-form").addEventListener("submit",(e=>{const t=document.querySelector("#reservation-name"),n=document.querySelector("#start-date"),o=document.querySelector("#end-date");e.preventDefault(),function(){const e=document.querySelector("#reservation-name").value,t=document.querySelector("#start-date").value,n=document.querySelector("#end-date").value,o=document.querySelector(".showId").textContent,c=new m(e,t,n,o);d.push(c),E(o),localStorage.setItem("reserveStore",JSON.stringify(d))}(),t.value="",n.value="",o.value=""}))},k=document.querySelector("#content");function I(){const e=this.getAttribute("id");if(e){const t=document.getElementById(e);t&&window.scrollTo({top:t.offsetTop,behavior:"smooth"})}}function D(e){const t=document.createElement("div");t.classList.add("search-result-poster");const n=document.createElement("img");let o="./img/placeholder.jpg";return e.image?o=e.image.medium:e.show&&e.show.image&&(o=e.show.image.medium),n.src=o,n.alt="Poster",n.id="poster",t.appendChild(n),t.addEventListener("click",(()=>{k.style.alignItems="normal",k.innerHTML="",b(k,e)})),t}const T=function(e,t){const n=document.createElement("div");n.classList.add("search-result");const o=D(t),c=document.createElement("h3");c.textContent=t.name||t.show.name||"Title N/A",c.classList.add("title"),c.id="title";const r=document.createElement("div");r.classList.add("search-result-name"),r.appendChild(c);const a=document.createElement("div");a.classList.add("reaction-action");const s=document.createElement("div");s.classList.add("reaction");const l=document.createElement("div");l.classList.add("likes");const i=document.createElement("img");i.src="./assets/like.png",i.alt="Like";const d=document.createElement("div");d.textContent="Like",l.appendChild(i),l.appendChild(d);const m=document.createElement("div");m.classList.add("counter"),m.textContent="",s.appendChild(l),s.appendChild(m);const u=document.createElement("div");u.classList.add("actions");const h=document.createElement("button");h.textContent="Comment",h.classList.add("comment"),h.id="comment-log-section",h.addEventListener("click",(()=>{e.style.alignItems="normal",e.innerHTML="",b(e,t),I.call(h)}));const p=document.createElement("button");p.textContent="Reservations",p.classList.add("reservation"),p.id="reservation-log-section",p.addEventListener("click",(()=>{e.style.alignItems="normal",e.innerHTML="",b(e,t),I.call(p)})),u.appendChild(h),u.appendChild(p),a.appendChild(s),a.appendChild(u),n.appendChild(o),n.appendChild(r),n.appendChild(a),e.appendChild(n),l.addEventListener("click",(()=>{!function(e,t){e.classList.contains("liked")?(e.classList.remove("liked"),t.innerHTML=""):(e.classList.add("liked"),t.innerHTML="Liked")}(l,m)}))},$=document.querySelector("#content");async function M(){try{const e=await fetch("https://api.tvmaze.com/shows"),t=await e.json(),n=Math.floor(200*Math.random());return t.slice(n,n+20).forEach((e=>{T($,e)})),t}catch(e){return e}}document.querySelector("#home").addEventListener("click",(e=>{e.preventDefault(),$.innerHTML="",M()}));const H=M,A=document.getElementById("content"),j=document.querySelector("header"),F=document.querySelector("content"),R=document.querySelector("footer"),B=document.querySelector(".errorClose"),J=document.querySelector(".errorDialog");function O(e){document.querySelector(".errorMessage").innerText=e,document.querySelector(".errorDialog").style.display="block",j.style.pointerEvents="none",F.style.pointerEvents="none",R.style.pointerEvents="none",document.body.style.overflow="hidden"}B.addEventListener("click",(e=>{e.preventDefault(),J.style.display="none",j.style.pointerEvents="auto",F.style.pointerEvents="auto",R.style.pointerEvents="auto",document.body.style.overflow="auto",H()}));const Y=document.querySelector(".hamburger"),z=document.querySelector(".nav-items"),P=document.querySelector("#content");function G(){Y.classList.remove("active"),z.classList.remove("active")}document.querySelector(".search-button").addEventListener("click",(e=>{e.preventDefault(),P.innerHTML="",async function(){try{const e=document.getElementById("search").value,t="https://api.tvmaze.com/";if(""!==e){const n=await fetch(`${t}search/shows?q=${e}`),o=await async function(e){const t=await e.json();return e.ok&&0===t.length?(O("No item found."),"No item found."):e.ok?(t.forEach((e=>{T(A,e)})),t):(O(`Error in fetchedData: ${t.Error}`),t.Error)}(n);return o}O("No search input provided.")}catch(e){return O(`${e.message}, unable to complete request.`),e.message}}(),G()}));const K=document.querySelector("#content"),Q=document.querySelectorAll("#tvshows"),U=document.getElementsByClassName("nav-link");function V(e){for(let e=0;e<U.length;e+=1)U[e].classList.remove("active");e.target.classList.add("active")}window.addEventListener("load",(()=>{const e=document.querySelector("#loader");e.classList.add("loader-hidden"),e.addEventListener("transitionend",(()=>{e.style.display="none"}))})),H(),Q.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),K.innerHTML="",async function(){try{const e=await fetch("https://api.tvmaze.com/shows"),t=await e.json();return t.forEach((e=>{T(K,e)})),t}catch(e){return e}}()}))})),function(){for(let e=0;e<U.length;e+=1)U[e].addEventListener("click",V)}();const W=document.querySelector(".hamburger"),X=document.querySelectorAll(".nav-link");W.addEventListener("click",(function(){Y.classList.toggle("active"),z.classList.toggle("active")})),X.forEach((e=>e.addEventListener("click",G))),window.addEventListener("click",(function(e){e.target.closest(".hamburger")||e.target.closest(".nav-items")||G()}))})();