(()=>{"use strict";const e=document.querySelector("#content");function t(t){const n=document.createElement("div");n.classList.add("search-result-poster");const o=document.createElement("img");let a="./img/placeholder.jpg";return t.image?a=t.image.medium:t.show&&t.show.image&&(a=t.show.image.medium),o.src=a,o.alt="Poster",o.id="poster",n.appendChild(o),n.addEventListener("click",(()=>{e.style.alignItems="normal",e.innerHTML="",function(e,t){const n=document.createElement("div");n.className="full-details";const o=document.createElement("div");o.className="image-card";const a=document.createElement("img");a.src=t.image?t.image.medium:t.show.image?t.show.image.medium:"./img/placeholder.jpg",a.alt="show poster";const c=document.createElement("div");c.className="show-info";const s=document.createElement("h1");s.className="showId",s.style.display="none",s.textContent=t.id||t.show.id;const r=document.createElement("h1");r.className="showTitle",r.textContent=t.name||t.show.name;const d=document.createElement("h3");d.className="year",d.textContent=`Ended: ${t.ended||t.show.ended||"N/A"}`;const i=document.createElement("h3");i.className="genre",i.textContent=t.genres?t.genres.join(", "):t.show.genres?t.show.genres.join(", "):"Genres N/A";const l=document.createElement("h3");l.className="language",l.textContent=`Language: ${t.language||t.show.language||"N/A"}`;const m=document.createElement("h3");m.className="rating",m.textContent=t.rating?.average?`Rating: ${t.rating.average}/10`:t.show.rating?.average?`Rating: ${t.show.rating.average}/10`:"Rating: N/A";const u=document.createElement("div");u.className="show-summary";const h=document.createElement("h2");h.className="plot",h.textContent="Plot Summary";const p=document.createElement("div");p.className="summary",p.innerHTML=t.summary||t.show.summary||"Summary N/A",u.appendChild(h),u.appendChild(p);const g=[s,r,d,i,l,m,u];for(let e=0;e<g.length;e+=1)c.appendChild(g[e]);o.appendChild(a),o.appendChild(c),n.appendChild(o),e.appendChild(n)}(e,t)})),n}const n=function(e,n){const o=document.createElement("div");o.classList.add("search-result");const a=t(n),c=document.createElement("h3");c.textContent=n.name||n.show.name||"Title N/A",c.classList.add("title"),c.id="title";const s=document.createElement("div");s.classList.add("search-result-name"),s.appendChild(c);const r=document.createElement("div");r.classList.add("reaction-action");const d=document.createElement("div");d.classList.add("reaction");const i=document.createElement("div");i.classList.add("likes");const l=document.createElement("img");l.src="./assets/like.png",l.alt="Like";const m=document.createElement("div");m.textContent="Like",i.appendChild(l),i.appendChild(m);const u=document.createElement("div");u.classList.add("counter"),u.textContent="",d.appendChild(i),d.appendChild(u);const h=document.createElement("div");h.classList.add("actions");const p=document.createElement("button");p.textContent="Comment",p.classList.add("comment");const g=document.createElement("button");g.textContent="Reservations",g.classList.add("reservation"),h.appendChild(p),h.appendChild(g),r.appendChild(d),r.appendChild(h),o.appendChild(a),o.appendChild(s),o.appendChild(r),e.appendChild(o)},o=document.querySelector("#content");async function a(){try{const e=await fetch("https://api.tvmaze.com/shows"),t=await e.json(),a=Math.floor(200*Math.random());return t.slice(a,a+20).forEach((e=>{n(o,e)})),t}catch(e){return e}}document.querySelector("#home").addEventListener("click",(e=>{e.preventDefault(),o.innerHTML="",a()}));const c=a,s=document.getElementById("content"),r=document.querySelector("header"),d=document.querySelector("content"),i=document.querySelector("footer"),l=document.querySelector(".errorClose"),m=document.querySelector(".errorDialog");function u(e){document.querySelector(".errorMessage").innerText=e,document.querySelector(".errorDialog").style.display="block",r.style.pointerEvents="none",d.style.pointerEvents="none",i.style.pointerEvents="none",document.body.style.overflow="hidden"}l.addEventListener("click",(e=>{e.preventDefault(),m.style.display="none",r.style.pointerEvents="auto",d.style.pointerEvents="auto",i.style.pointerEvents="auto",document.body.style.overflow="auto",c()}));const h=document.querySelector(".hamburger"),p=document.querySelector(".nav-items"),g=document.querySelector("#content");function v(){h.classList.remove("active"),p.classList.remove("active")}document.querySelector(".search-button").addEventListener("click",(e=>{e.preventDefault(),g.innerHTML="",async function(){try{const e=document.getElementById("search").value,t="https://api.tvmaze.com/";if(""!==e){const o=await fetch(`${t}search/shows?q=${e}`),a=await async function(e){const t=await e.json();return e.ok&&0===t.length?(u("No item found."),"No item found."):e.ok?(t.forEach((e=>{n(s,e)})),t):(u(`Error in fetchedData: ${t.Error}`),t.Error)}(o);return a}u("No search input provided.")}catch(e){return u(`${e.message}, unable to complete request.`),e.message}}()}));const E=document.querySelector("#content"),y=void document.querySelectorAll("#tvshows").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),E.innerHTML="",async function(){try{const e=await fetch("https://api.tvmaze.com/shows"),t=await e.json();return t.forEach((e=>{n(E,e)})),t}catch(e){return e}}()}))}));window.addEventListener("load",(()=>{const e=document.querySelector("#loader");e.classList.add("loader-hidden"),e.addEventListener("transitionend",(()=>{document.body.removeChild("loader")}))})),c(),y();const w=document.querySelector(".hamburger"),C=document.querySelectorAll(".nav-link");w.addEventListener("click",(function(){h.classList.toggle("active"),p.classList.toggle("active")})),C.forEach((e=>e.addEventListener("click",v))),window.addEventListener("click",(function(e){e.target.closest(".hamburger")||e.target.closest(".nav-items")||v()}))})();